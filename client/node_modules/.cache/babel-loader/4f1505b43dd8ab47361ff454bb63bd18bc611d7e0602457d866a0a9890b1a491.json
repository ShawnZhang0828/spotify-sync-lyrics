{"ast":null,"code":"var _jsxFileName = \"C:\\\\Study\\\\VS Code\\\\spotify-lyrics-sync\\\\client\\\\src\\\\components\\\\Header.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport qs from 'qs';\nimport { Buffer } from 'buffer';\nimport LoginButton from \"./LoginButton\";\nimport '../styles/login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CLIENT_ID = \"07f45b95ceac490ba0871336604107e0\";\nconst CLIENT_SECRET = \"2896dd203a234606ab0e2ba2a2aa5ad8\";\nconst SCOPE = \"user-read-currently-playing\";\nconst REDIRECT_URI = \"http://localhost:3000/auth/login\";\nconst AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\";\nconst RESPONSE_TYPE = \"code\";\nconst Header = _ref => {\n  _s();\n  let {\n    props\n  } = _ref;\n  const getUserData = async code => {\n    console.log((CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'));\n    try {\n      const headers = {\n        headers: {\n          // Accept: 'application/json',\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Authorization': 'Basic ' + new Buffer.from(CLIENT_ID + ':' + CLIENT_SECRET).toString('base64')\n        }\n        // auth: {\n        //   code: code\n        // },\n      };\n\n      const data = {\n        grant_type: 'authorization_code',\n        code: code\n      };\n      const response = await axios.post('https://accounts.spotify.com/api/token', qs.stringify(data), headers);\n      const userData = response.data;\n      const refreshToken = userData.refresh_token;\n      window.localStorage.setItem(\"refresh-token\", (CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'));\n      return refreshToken;\n    } catch (error) {\n      window.localStorage.setItem(\"refresh-token\", error);\n      window.localStorage.setItem(\"refresh-token2\", btoa(CLIENT_ID + ':' + CLIENT_SECRET));\n    }\n  };\n  const login = async e => {\n    e.preventDefault();\n    try {\n      const response = await axios.get('/auth/login');\n      console.log(response);\n      // window.location.replace(response.data.url);\n    } catch (error) {\n      console.error(error);\n    }\n  };\n  const logout = async () => {\n    setCode(\"\");\n    // try {\n    //   const response = await axios.get(`/api/auth/login`);\n    //   window.location.replace(response.data.url);\n    // } catch (error) {\n    //   console.error(error);\n    // }\n  };\n\n  const [code, setCode] = useState(\"\");\n  useEffect(() => {\n    const search = window.location.search;\n    let code = window.localStorage.getItem(\"code\");\n    if (!code && search) {\n      const urlParams = new URLSearchParams(window.location.search);\n      code = urlParams.get('code');\n      getUserData(code).then(() => {\n        window.location.search = \"\";\n        window.localStorage.setItem(\"code\", code);\n      });\n    }\n    setCode(code);\n  }, []);\n  return (\n    /*#__PURE__*/\n    // <h1>Spotify React {code ? <LoginButton onClick={logout} text=\"logout\"/> : <LoginButton onClick={login} text=\"login\"/>} </h1>\n    _jsxDEV(\"h1\", {\n      children: [\"Spotify React \", code ? /*#__PURE__*/_jsxDEV(LoginButton, {\n        onClick: logout,\n        text: \"logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 31\n      }, this) : /*#__PURE__*/_jsxDEV(\"a\", {\n        href: \"auth/login\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 79\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(Header, \"FE42fR7c//TxniZM6R7Q0xMAMis=\");\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["useEffect","useState","axios","qs","Buffer","LoginButton","jsxDEV","_jsxDEV","CLIENT_ID","CLIENT_SECRET","SCOPE","REDIRECT_URI","AUTH_ENDPOINT","RESPONSE_TYPE","Header","_ref","_s","props","getUserData","code","console","log","toString","headers","from","data","grant_type","response","post","stringify","userData","refreshToken","refresh_token","window","localStorage","setItem","error","btoa","login","e","preventDefault","get","logout","setCode","search","location","getItem","urlParams","URLSearchParams","then","children","onClick","text","fileName","_jsxFileName","lineNumber","columnNumber","href","_c","$RefreshReg$"],"sources":["C:/Study/VS Code/spotify-lyrics-sync/client/src/components/Header.js"],"sourcesContent":["import {useEffect, useState} from 'react'\r\nimport axios from 'axios';\r\nimport qs from 'qs'\r\nimport { Buffer } from 'buffer';\r\nimport LoginButton from \"./LoginButton\"\r\nimport '../styles/login.css'\r\n\r\nconst CLIENT_ID = \"07f45b95ceac490ba0871336604107e0\"\r\nconst CLIENT_SECRET = \"2896dd203a234606ab0e2ba2a2aa5ad8\"\r\nconst SCOPE = \"user-read-currently-playing\"\r\nconst REDIRECT_URI = \"http://localhost:3000/auth/login\"\r\nconst AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\"\r\nconst RESPONSE_TYPE = \"code\"\r\n\r\nconst Header = ({ props }) => {\r\n\r\n  const getUserData = async (code) => {\r\n    console.log((CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'));\r\n    try {\r\n      const headers = {\r\n        headers: {\r\n          // Accept: 'application/json',\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          'Authorization': 'Basic ' + (new Buffer.from(CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'))\r\n        },\r\n        // auth: {\r\n        //   code: code\r\n        // },\r\n      };\r\n      const data = {\r\n        grant_type: 'authorization_code',\r\n        code: code\r\n      };\r\n\r\n      const response = await axios.post(\r\n        'https://accounts.spotify.com/api/token',\r\n        qs.stringify(data),\r\n        headers\r\n      );\r\n      const userData = response.data;\r\n      const refreshToken = userData.refresh_token;\r\n      window.localStorage.setItem(\"refresh-token\", (CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'))\r\n      return refreshToken;\r\n    } catch (error) {\r\n      window.localStorage.setItem(\"refresh-token\", error)\r\n      window.localStorage.setItem(\"refresh-token2\", btoa(CLIENT_ID + ':' + CLIENT_SECRET))\r\n    }\r\n  }\r\n\r\n  const login = async (e) => {\r\n    e.preventDefault()\r\n    try {\r\n      const response = await axios.get('/auth/login');\r\n      console.log(response);\r\n      // window.location.replace(response.data.url);\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  }\r\n  \r\n  const logout = async () => {\r\n    setCode(\"\")\r\n    // try {\r\n    //   const response = await axios.get(`/api/auth/login`);\r\n    //   window.location.replace(response.data.url);\r\n    // } catch (error) {\r\n    //   console.error(error);\r\n    // }\r\n  }\r\n  \r\n  const [code, setCode] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    const search = window.location.search\r\n    let code = window.localStorage.getItem(\"code\")\r\n\r\n    if (!code && search) {\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      code = urlParams.get('code');\r\n      \r\n      getUserData(code).then(() => {\r\n        window.location.search = \"\"\r\n        window.localStorage.setItem(\"code\", code)\r\n      })\r\n    }\r\n\r\n    setCode(code)\r\n  }, []);\r\n\r\n  return (\r\n    // <h1>Spotify React {code ? <LoginButton onClick={logout} text=\"logout\"/> : <LoginButton onClick={login} text=\"login\"/>} </h1>\r\n    <h1>Spotify React {code ? <LoginButton onClick={logout} text=\"logout\"/> : <a href='auth/login'>Login</a>} </h1>\r\n  )\r\n}\r\n\r\nexport default Header"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
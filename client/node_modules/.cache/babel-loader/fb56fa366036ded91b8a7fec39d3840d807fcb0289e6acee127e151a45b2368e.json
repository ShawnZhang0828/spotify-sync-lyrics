{"ast":null,"code":"var _jsxFileName = \"C:\\\\Study\\\\VS Code\\\\spotify-lyrics-sync\\\\client\\\\src\\\\components\\\\Header.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport qs from 'qs';\nimport { Buffer } from 'buffer';\nimport LoginButton from \"./LoginButton\";\nimport '../styles/login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CLIENT_ID = \"07f45b95ceac490ba0871336604107e0\";\nconst CLIENT_SECRET = \"2896dd203a234606ab0e2ba2a2aa5ad8\";\nconst SCOPE = \"user-read-currently-playing\";\nconst REDIRECT_URI = \"http://localhost:3000/auth/login\";\nconst AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\";\nconst RESPONSE_TYPE = \"code\";\nconst Header = _ref => {\n  _s();\n  let {\n    props\n  } = _ref;\n  const getUserData = async code => {\n    console.log((CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'));\n    try {\n      const headers = {\n        headers: {\n          // Accept: 'application/json',\n          'Content-Type': 'application/x-www-form-urlencoded',\n          'Authorization': 'Basic ' + new Buffer.from(CLIENT_ID + ':' + CLIENT_SECRET).toString('base64')\n        }\n        // auth: {\n        //   code: code\n        // },\n      };\n\n      const data = {\n        grant_type: 'authorization_code',\n        code: code\n      };\n      const response = await axios.post('https://accounts.spotify.com/api/token', qs.stringify(data), headers);\n      const userData = response.data;\n      const refreshToken = userData.refresh_token;\n      for (const prop in response.data) {\n        console.log(`${prop}: ${response.data[prop]}`);\n      }\n      window.localStorage.setItem(\"refresh-token\", (CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'));\n      return refreshToken;\n    } catch (error) {\n      window.localStorage.setItem(\"refresh-token\", error);\n      window.localStorage.setItem(\"refresh-token2\", btoa(CLIENT_ID + ':' + CLIENT_SECRET));\n    }\n  };\n  const login = e => {\n    e.preventDefault();\n    window.location.href = `${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&scope=${SCOPE}&redirect_uri=${REDIRECT_URI}&response_type=${RESPONSE_TYPE}&show_dialog=true`;\n  };\n  const logout = () => {\n    setCode(\"\");\n    window.localStorage.removeItem(\"code\");\n  };\n  const [code, setCode] = useState(\"\");\n  useEffect(() => {\n    const search = window.location.search;\n    let code = window.localStorage.getItem(\"code\");\n    if (!code && search) {\n      const urlParams = new URLSearchParams(window.location.search);\n      code = urlParams.get('code');\n      getUserData(code).then(() => {\n        window.location.search = \"\";\n        window.localStorage.setItem(\"code\", code);\n      });\n    }\n    setCode(code);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"h1\", {\n    children: [\"Spotify React \", code ? /*#__PURE__*/_jsxDEV(LoginButton, {\n      onClick: logout,\n      text: \"logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 31\n    }, this) : /*#__PURE__*/_jsxDEV(LoginButton, {\n      onClick: login,\n      text: \"login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 79\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 5\n  }, this);\n};\n_s(Header, \"FE42fR7c//TxniZM6R7Q0xMAMis=\");\n_c = Header;\nexport default Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["useEffect","useState","axios","qs","Buffer","LoginButton","jsxDEV","_jsxDEV","CLIENT_ID","CLIENT_SECRET","SCOPE","REDIRECT_URI","AUTH_ENDPOINT","RESPONSE_TYPE","Header","_ref","_s","props","getUserData","code","console","log","toString","headers","from","data","grant_type","response","post","stringify","userData","refreshToken","refresh_token","prop","window","localStorage","setItem","error","btoa","login","e","preventDefault","location","href","logout","setCode","removeItem","search","getItem","urlParams","URLSearchParams","get","then","children","onClick","text","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Study/VS Code/spotify-lyrics-sync/client/src/components/Header.js"],"sourcesContent":["import {useEffect, useState} from 'react'\r\nimport axios from 'axios';\r\nimport qs from 'qs'\r\nimport { Buffer } from 'buffer';\r\nimport LoginButton from \"./LoginButton\"\r\nimport '../styles/login.css'\r\n\r\nconst CLIENT_ID = \"07f45b95ceac490ba0871336604107e0\"\r\nconst CLIENT_SECRET = \"2896dd203a234606ab0e2ba2a2aa5ad8\"\r\nconst SCOPE = \"user-read-currently-playing\"\r\nconst REDIRECT_URI = \"http://localhost:3000/auth/login\"\r\nconst AUTH_ENDPOINT = \"https://accounts.spotify.com/authorize\"\r\nconst RESPONSE_TYPE = \"code\"\r\n\r\nconst Header = ({ props }) => {\r\n\r\n  const getUserData = async (code) => {\r\n    console.log((CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'));\r\n    try {\r\n      const headers = {\r\n        headers: {\r\n          // Accept: 'application/json',\r\n          'Content-Type': 'application/x-www-form-urlencoded',\r\n          'Authorization': 'Basic ' + (new Buffer.from(CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'))\r\n        },\r\n        // auth: {\r\n        //   code: code\r\n        // },\r\n      };\r\n      const data = {\r\n        grant_type: 'authorization_code',\r\n        code: code\r\n      };\r\n\r\n      const response = await axios.post(\r\n        'https://accounts.spotify.com/api/token',\r\n        qs.stringify(data),\r\n        headers\r\n      );\r\n      const userData = response.data;\r\n      const refreshToken = userData.refresh_token;\r\n      for (const prop in response.data) {\r\n        console.log(`${prop}: ${response.data[prop]}`);\r\n      }\r\n      window.localStorage.setItem(\"refresh-token\", (CLIENT_ID + ':' + CLIENT_SECRET).toString('base64'))\r\n      return refreshToken;\r\n    } catch (error) {\r\n      window.localStorage.setItem(\"refresh-token\", error)\r\n      window.localStorage.setItem(\"refresh-token2\", btoa(CLIENT_ID + ':' + CLIENT_SECRET))\r\n    }\r\n  }\r\n\r\n  const login = (e) => {\r\n    e.preventDefault()\r\n    window.location.href = `${AUTH_ENDPOINT}?client_id=${CLIENT_ID}&scope=${SCOPE}&redirect_uri=${REDIRECT_URI}&response_type=${RESPONSE_TYPE}&show_dialog=true`\r\n  }\r\n  \r\n  const logout = () => {\r\n    setCode(\"\")\r\n    window.localStorage.removeItem(\"code\")\r\n  }\r\n  \r\n  const [code, setCode] = useState(\"\")\r\n\r\n  useEffect(() => {\r\n    const search = window.location.search\r\n    let code = window.localStorage.getItem(\"code\")\r\n\r\n    if (!code && search) {\r\n      const urlParams = new URLSearchParams(window.location.search);\r\n      code = urlParams.get('code');\r\n      \r\n      getUserData(code).then(() => {\r\n        window.location.search = \"\"\r\n        window.localStorage.setItem(\"code\", code)\r\n      })\r\n    }\r\n\r\n    setCode(code)\r\n  }, []);\r\n\r\n  return (\r\n    <h1>Spotify React {code ? <LoginButton onClick={logout} text=\"logout\"/> : <LoginButton onClick={login} text=\"login\"/>} </h1>\r\n  )\r\n}\r\n\r\nexport default Header"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}